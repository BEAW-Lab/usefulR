% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/download_era5.R
\name{download_era5}
\alias{download_era5}
\title{Download ERA5 Point Data from the Copernicus Climate Data Store}
\usage{
download_era5(
  start_date,
  end_date,
  coords,
  variables,
  token,
  temp_dir = "era5_downloads",
  force = FALSE
)
}
\arguments{
\item{start_date}{Character or Date. Start of the time window
(e.g., `"2020-01-01"`).}

\item{end_date}{Character or Date. End of the time window
(e.g., `"2020-01-31"`).}

\item{coords}{A data frame containing point coordinates with columns:
\describe{
  \item{lon}{Longitude in decimal degrees.}
  \item{lat}{Latitude in decimal degrees.}
}}

\item{variables}{Character vector of ERA5 variable names to download.}

\item{token}{Character. Your CDS API token (passed to
\code{ecmwfr::wf_set_key}).}

\item{temp_dir}{Character. Directory where NetCDF files will be stored.
Defaults to `"era5_downloads"`. Created if missing.}

\item{force}{Logical. If \code{FALSE} (default), existing files are skipped.
If \code{TRUE}, existing files are overwritten and re-downloaded.}
}
\value{
Invisibly returns \code{NULL}.  
  The function is called for its side effects: downloading NetCDF files.
}
\description{
This function downloads ERA5 reanalysis data for one or more geographic
coordinates by requesting a small spatial window around each point  
(ERA5 does not support point queries directly). It retrieves hourly data
for a user-defined time range and list of climate variables using the
Copernicus Climate Data Store (CDS) API via the \pkg{ecmwfr} package.
}
\details{
One NetCDF file is produced per coordinate.


ERA5 provides hourly climate data at ~0.25° resolution. Because the CDS API
does not support exact point extraction, the function automatically builds a
small bounding box (0.3° buffer) around each coordinate to ensure that the
relevant ERA5 grid cell is included.

For large spatial or temporal requests, downloads may take time.  
To avoid unnecessary downloads, existing files are skipped unless
\code{force = TRUE}.
}
\examples{
\dontrun{
coords <- data.frame(
  lon = c(-3.70, -8.40),
  lat = c(40.42, 43.36)
)

download_era5(
  start_date = "2021-01-01",
  end_date   = "2021-01-31",
  coords     = coords,
  variables  = c("2m_temperature"),
  token      = "your_cds_token_here"
)

# Force overwriting existing NetCDF files
download_era5(
  start_date = "2021-01-01",
  end_date   = "2021-01-31",
  coords     = coords,
  variables  = "total_precipitation",
  token      = "your_cds_token_here",
  force      = TRUE
)
}

}
